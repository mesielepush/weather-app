!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(2);var r=()=>{async function e(e,t){try{const n=await fetch(`http://api.openweathermap.org/data/2.5/forecast?q=${e}&units=${t}&APPID=cce2c60920c027318b4c5a975aebccc8`),r=await n.json();console.log(r);const i={weather:r.list[0].weather[0].description,pressure:r.list[0].main.pressure,wind:r.list[0].wind,clouds:r.list[0].clouds.all,humidity:r.list[0].main.humidity};return{city:e,weather:i,temp:r.list[0].main.temp,tempMax:r.list[0].main.temp_max,tempMin:r.list[0].main.temp_min,feels:r.list[0].main.feels_like,country:r.city.country}}catch(e){alert("City does not exist")}}return{celsius:function(t){return e(t,"metric")},imperial:function(t){return e(t,"imperial")}}};var i=()=>{const e=new Date;return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()].toUpperCase()+" / "+e.getDate()+" / "+e.getFullYear()};var o=e=>{e.then(e=>{console.log(e);const t=document.getElementById("country"),n=document.getElementById("temp"),r=document.getElementById("temp_max"),o=document.getElementById("temp_min"),a=document.getElementById("temp_feels"),c=document.getElementById("weather"),s=document.getElementById("pressure"),u=document.getElementById("wind"),l=document.getElementById("clouds"),d=document.getElementById("humidity"),p=document.getElementById("cities");document.getElementById("now").innerText=i(),t.innerText=e.country,n.innerText=e.temp,r.innerText=e.tempMax,o.innerText=e.tempMin,a.innerText=e.feels,c.innerText=e.weather.weather,s.innerText=e.weather.pressure,u.innerText=e.weather.wind.spped,l.innerText=e.weather.clouds,d.innerText=e.weather.humidity,p.innerText=e.city})};n(1);var a=e=>{const t=document.getElementById("city"),n=document.getElementById("selector");n.addEventListener("change",t=>{const n=document.getElementById("cities").innerText;if(t.target.checked){const t=e.imperial(n);o(t)}else{const t=e.celsius(n);o(t)}}),t.addEventListener("keydown",(function(){if(13==event.keyCode){const{value:r}=t;if(t.value="",n.checked){const t=e.imperial(r);o(t)}else{const t=e.celsius(r);o(t)}}}))};const c=r();a(c);c.celsius("oaxaca").then(e=>{})},function(e,t){},function(e,t,n){var r=n(3),i=n(4);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function c(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],u=n[s]||0,l="".concat(s," ").concat(u);n[s]=u+1;var d=c(l),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:b(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function m(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,h=0;function b(e,t){var n,r,i;if(t.singleton){var o=h++;n=f||(f=u(t)),r=p.bind(null,n,o,!1),i=p.bind(null,n,o,!0)}else n=u(t),r=m.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=c(n[r]);a[i].references--}for(var o=s(e,t),u=0;u<n.length;u++){var l=c(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){(t=n(5)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap);"]),t.push([e.i,'body{background-color:#000}.main{position:relative;margin-top:5rem;width:45rem;height:45rem;border-radius:25px;background-color:#97b0e5;-webkit-box-shadow:inset 0px 2px 35px 11px rgba(0,0,0,.75);-moz-box-shadow:inset 0px 2px 35px 11px rgba(0,0,0,.75);box-shadow:inset 0px 2px 35px 11px rgba(0,0,0,.75)}.main div{color:#fff;-webkit-box-shadow:inset 0px 2px 35px 11px rgba(0,0,0,.75);-moz-box-shadow:inset 0px 2px 35px 11px rgba(0,0,0,.75);box-shadow:inset 0px 2px 35px 11px rgba(0,0,0,.75)}.main span{color:#fff}.main .dates{position:relative;border-radius:20px;padding:2rem;top:-10rem;width:auto;height:4rem;display:none;background-color:rgba(74,207,240,.75);font-family:"Press Start 2P",cursive}.main .city_country{position:relative;top:-9rem;width:auto;padding:2rem;height:2rem;display:none;font-family:"Press Start 2P",cursive;border-radius:25px}.main .switch{position:relative;display:inline-block;width:60px;height:34px;margin:5px}.main .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.main .slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.main input:checked+.slider{background-color:#2196f3}.main input:focus+.slider{box-shadow:0 0 1px #2196f3}.main input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}.main .slider.round{border-radius:34px}.main .slider.round:before{border-radius:50%}.main .temps{position:relative;bottom:-7rem;width:35rem;height:10rem;border-radius:25px;background-color:green}.main .others{position:relative;left:0;bottom:-9rem;width:35rem;height:5rem;border-radius:25px;background-color:#cfbd16}.main .input_city{position:relative;top:-8rem}.main #no_city{display:none}',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,c,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&i[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NlbnRyYWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2dldERhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3JlbmRlckNlbHNpdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2RhdGFIYW5kbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGVzL3N0eWxlLnNjc3M/ZTVkOCIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9zdHlsZS5zY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJhc3luYyIsIndlYXRoZXIiLCJjaXR5IiwibWVzdXJlIiwicmVzcG9uc2UiLCJmZXRjaCIsIndlYXRoZXJEYXRhIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJsaXN0IiwiZGVzY3JpcHRpb24iLCJtYWluIiwicHJlc3N1cmUiLCJ3aW5kIiwiY2xvdWRzIiwiYWxsIiwiaHVtaWRpdHkiLCJ0ZW1wIiwidGVtcF9tYXgiLCJ0ZW1wX21pbiIsImZlZWxzX2xpa2UiLCJjb3VudHJ5IiwiZXJyIiwiYWxlcnQiLCJjZWxzaXVzIiwiaW1wZXJpYWwiLCJjdXJyZW50RGF0ZXRpbWUiLCJEYXRlIiwiZ2V0TW9udGgiLCJ0b1VwcGVyQ2FzZSIsImdldERhdGUiLCJnZXRGdWxsWWVhciIsImRhdGEiLCJ0aGVuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRlbXBfZmVlbHMiLCJpbm5lclRleHQiLCJ0ZW1wTWF4IiwidGVtcE1pbiIsImZlZWxzIiwic3BwZWQiLCJzZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNoZWNrZWQiLCJ0b1JlbmRlciIsImtleUNvZGUiLCJhcGkiLCJjb250ZW50IiwiZGVmYXVsdCIsIm9wdGlvbnMiLCJsb2NhbHMiLCJtZW1vIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJ3aW5kb3ciLCJhdG9iIiwiZ2V0VGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibGVuZ3RoIiwibW9kdWxlc1RvRG9tIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiaXRlbSIsImlkIiwiYmFzZSIsImNvdW50IiwiY29uY2F0IiwiaW5kZXgiLCJvYmoiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwicHVzaCIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsIm5vbmNlIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImpvaW4iLCJhcHBseVRvU2luZ2xldG9uVGFnIiwicmVtb3ZlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBseVRvVGFnIiwicmVtb3ZlQXR0cmlidXRlIiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpcnN0Q2hpbGQiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwidXBkYXRlIiwic3R5bGVJbmRleCIsInBhcmVudE5vZGUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJuZXdPYmoiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwidG9TdHJpbmciLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsInNwbGljZSIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsInVzZVNvdXJjZU1hcCIsInRoaXMiLCJtYXAiLCJjc3NNYXBwaW5nIiwic291cmNlTWFwcGluZyIsImJhc2U2NCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiZGVkdXBlIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9E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SUFBSW5FLE9BQU9rRSxFQUFRLFVBRTdFLE1BQU8sQ0FBQzlGLEdBQVM0QixPQUFPZ0UsR0FBWWhFLE9BQU8sQ0FBQzhELElBQWdCckMsS0FBSyxNQU9yRSxJQUFtQnBCLEVBRWIwRCxFQUNBN0csRUFQSixNQUFPLENBQUNrQixHQUFTcUQsS0FBSyxNQXZFSjJDLENBQXVCeEUsRUFBTThELEdBRTNDLE9BQUk5RCxFQUFLLEdBQ0EsVUFBVUksT0FBT0osRUFBSyxHQUFJLE1BQU1JLE9BQU81QixFQUFTLEtBR2xEQSxLQUNOcUQsS0FBSyxLQUtWOUYsRUFBSzFDLEVBQUksU0FBVUUsRUFBU2tMLEVBQVlDLEdBQ2YsaUJBQVpuTCxJQUVUQSxFQUFVLENBQUMsQ0FBQyxLQUFNQSxFQUFTLE1BRzdCLElBQUlvTCxFQUF5QixHQUU3QixHQUFJRCxFQUNGLElBQUssSUFBSXJMLEVBQUksRUFBR0EsRUFBSTBLLEtBQUtuRSxPQUFRdkcsSUFBSyxDQUVwQyxJQUFJNEcsRUFBSzhELEtBQUsxSyxHQUFHLEdBRVAsTUFBTjRHLElBQ0YwRSxFQUF1QjFFLElBQU0sR0FLbkMsSUFBSyxJQUFJeUQsRUFBSyxFQUFHQSxFQUFLbkssRUFBUXFHLE9BQVE4RCxJQUFNLENBQzFDLElBQUkxRCxFQUFPLEdBQUdJLE9BQU83RyxFQUFRbUssSUFFekJnQixHQUFVQyxFQUF1QjNFLEVBQUssTUFLdEN5RSxJQUNHekUsRUFBSyxHQUdSQSxFQUFLLEdBQUssR0FBR0ksT0FBT3FFLEVBQVksU0FBU3JFLE9BQU9KLEVBQUssSUFGckRBLEVBQUssR0FBS3lFLEdBTWQxSSxFQUFLNkUsS0FBS1osTUFJUGpFIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIlxyXG5jb25zdCBDZW50cmFsID0gKCkgPT57XHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gd2VhdGhlcihjaXR5LG1lc3VyZSl7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD9xPSR7Y2l0eX0mdW5pdHM9JHttZXN1cmV9JkFQUElEPWNjZTJjNjA5MjBjMDI3MzE4YjRjNWE5NzVhZWJjY2M4YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdlYXRoZXJEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3ZWF0aGVyRGF0YSlcclxuICAgICAgICAgICAgY29uc3Qgd2VhdGhlciA9ICB7J3dlYXRoZXInOndlYXRoZXJEYXRhLmxpc3RbMF0ud2VhdGhlclswXS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcmVzc3VyZSc6d2VhdGhlckRhdGEubGlzdFswXS5tYWluLnByZXNzdXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dpbmQnOndlYXRoZXJEYXRhLmxpc3RbMF0ud2luZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbG91ZHMnOndlYXRoZXJEYXRhLmxpc3RbMF0uY2xvdWRzLmFsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodW1pZGl0eSc6d2VhdGhlckRhdGEubGlzdFswXS5tYWluLmh1bWlkaXR5fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0geydjaXR5JzogY2l0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dlYXRoZXInOndlYXRoZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0ZW1wJzogd2VhdGhlckRhdGEubGlzdFswXS5tYWluLnRlbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0ZW1wTWF4Jzogd2VhdGhlckRhdGEubGlzdFswXS5tYWluLnRlbXBfbWF4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndGVtcE1pbic6IHdlYXRoZXJEYXRhLmxpc3RbMF0ubWFpbi50ZW1wX21pbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZlZWxzJzogd2VhdGhlckRhdGEubGlzdFswXS5tYWluLmZlZWxzX2xpa2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb3VudHJ5Jzp3ZWF0aGVyRGF0YS5jaXR5LmNvdW50cnl9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcblxyXG4gICAgICAgIH0gY2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgYWxlcnQoJ0NpdHkgZG9lcyBub3QgZXhpc3QnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNlbHNpdXMoY2l0eSl7XHJcbiAgICAgICAgcmV0dXJuIHdlYXRoZXIoY2l0eSwnbWV0cmljJylcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGltcGVyaWFsKGNpdHkpe1xyXG4gICAgICAgIHJldHVybiB3ZWF0aGVyKGNpdHksJ2ltcGVyaWFsJylcclxuICAgIH1cclxuICAgIHJldHVybiB7Y2Vsc2l1cyxpbXBlcmlhbH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENlbnRyYWwiLCJjb25zdCBnZXREYXRlID0gKCk9PntcclxuICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLFxyXG4gICAgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZXRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgcmV0dXJuIG1vbnRoTmFtZXNbKGN1cnJlbnREYXRldGltZS5nZXRNb250aCgpKV0udG9VcHBlckNhc2UoKSsnIC8gJytjdXJyZW50RGF0ZXRpbWUuZ2V0RGF0ZSgpKycgLyAnK2N1cnJlbnREYXRldGltZS5nZXRGdWxsWWVhcigpXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgZ2V0RGF0ZSAiLCJpbXBvcnQgZ2V0RGF0ZSBmcm9tICcuL2dldERhdGUnXHJcbmNvbnN0IHJlbmRlckNlbHNpdXMgPSAoZGF0YSk9PntcclxuICAgIFxyXG4gICAgZGF0YS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXHJcbiAgICAgICAgY29uc3QgY291bnRyeSAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudHJ5Jyk7XHJcbiAgICAgICAgY29uc3QgdGVtcCAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wJyk7XHJcbiAgICAgICAgY29uc3QgdGVtcF9tYXggICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wX21heCcpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBfbWluICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVtcF9taW4nKTtcclxuICAgICAgICBjb25zdCB0ZW1wX2ZlZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBfZmVlbHMnKTtcclxuICAgICAgICBjb25zdCB3ZWF0aGVyICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlYXRoZXInKTtcclxuICAgICAgICBjb25zdCBwcmVzc3VyZSAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXNzdXJlJyk7XHJcbiAgICAgICAgY29uc3Qgd2luZCAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kJyk7XHJcbiAgICAgICAgY29uc3QgY2xvdWRzICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG91ZHMnKTtcclxuICAgICAgICBjb25zdCBodW1pZGl0eSAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h1bWlkaXR5Jyk7XHJcbiAgICAgICAgY29uc3QgY2l0eSAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXRpZXMnKTtcclxuICAgICAgICBjb25zdCBub3cgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vdycpO1xyXG5cclxuICAgICAgICBub3cuaW5uZXJUZXh0ID0gZ2V0RGF0ZSgpXHJcbiAgICAgICAgY291bnRyeS5pbm5lclRleHQgPSBkYXRhLmNvdW50cnlcclxuICAgICAgICB0ZW1wLmlubmVyVGV4dCA9IGRhdGEudGVtcFxyXG4gICAgICAgIHRlbXBfbWF4LmlubmVyVGV4dCAgID1kYXRhLnRlbXBNYXhcclxuICAgICAgICB0ZW1wX21pbi5pbm5lclRleHQgICA9ZGF0YS50ZW1wTWluXHJcbiAgICAgICAgdGVtcF9mZWVscy5pbm5lclRleHQgPWRhdGEuZmVlbHNcclxuICAgICAgICB3ZWF0aGVyLmlubmVyVGV4dCA9IGRhdGEud2VhdGhlci53ZWF0aGVyXHJcbiAgICAgICAgcHJlc3N1cmUuaW5uZXJUZXh0ID0gZGF0YS53ZWF0aGVyLnByZXNzdXJlXHJcbiAgICAgICAgd2luZC5pbm5lclRleHQgPSBkYXRhLndlYXRoZXIud2luZC5zcHBlZFxyXG4gICAgICAgIGNsb3Vkcy5pbm5lclRleHQgPSBkYXRhLndlYXRoZXIuY2xvdWRzXHJcbiAgICAgICAgaHVtaWRpdHkuaW5uZXJUZXh0ID0gZGF0YS53ZWF0aGVyLmh1bWlkaXR5XHJcbiAgICAgICAgY2l0eS5pbm5lclRleHQgPSBkYXRhLmNpdHlcclxuXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBcclxufVxyXG5leHBvcnQgZGVmYXVsdCByZW5kZXJDZWxzaXVzIiwiaW1wb3J0IHJlbmRlckNlbHNpdXMgZnJvbSAnLi9yZW5kZXJDZWxzaXVzJ1xyXG5pbXBvcnQgcmVuZGVySW1wZXJpYWwgZnJvbSAnLi9yZW5kZXJJbXBlcmlhbCdcclxuXHJcbmNvbnN0IGRhdGFIYW5kbGVyID0gKGRhdGEpPT57XHJcbiAgICBjb25zdCBjaXR5ICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NpdHknKTtcclxuICAgIGNvbnN0IHNlbGVjdG9yICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0b3InKTtcclxuICAgIFxyXG5cclxuICAgIHNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NpdGllcycpLmlubmVyVGV4dDtcclxuICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvUmVuZGVyID0gZGF0YS5jZWxzaXVzKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckNlbHNpdXModG9SZW5kZXIpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvUmVuZGVyID0gZGF0YS5pbXBlcmlhbCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHJlbmRlckNlbHNpdXModG9SZW5kZXIpXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG5cclxuXHJcblxyXG4gICAgY2l0eS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxmdW5jdGlvbigpIHtcclxuICAgICAgICBpZihldmVudC5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHt2YWx1ZX0gPSBjaXR5O1xyXG4gICAgICAgICAgICBjaXR5LnZhbHVlID0gJydcclxuICAgICAgICAgICAgaWYgKCFzZWxlY3Rvci5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9SZW5kZXIgPSBkYXRhLmNlbHNpdXModmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ2Vsc2l1cyh0b1JlbmRlcilcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9SZW5kZXIgPSBkYXRhLmltcGVyaWFsKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyQ2Vsc2l1cyh0b1JlbmRlcilcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gIFxyXG4gIFxyXG4gIFxyXG5cclxuICAgIFxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGF0YUhhbmRsZXIiLCJpbXBvcnQgJy4uL3N0eWxlcy9zdHlsZS5zY3NzJztcclxuaW1wb3J0IENlbnRyYWwgZnJvbSAnLi9jZW50cmFsJ1xyXG5pbXBvcnQgZGF0YUhhbmRsZXIgZnJvbSAnLi9kYXRhSGFuZGxlcidcclxuXHJcbmNvbnN0IGRhdGEgPSBDZW50cmFsKCk7XHJcbmNvbnN0IGRvbSA9IGRhdGFIYW5kbGVyKGRhdGEpO1xyXG5kYXRhLmNlbHNpdXMoJ29heGFjYScpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJAaW1wb3J0IHVybChodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVByZXNzK1N0YXJ0KzJQJmRpc3BsYXk9c3dhcCk7XCJdKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keXtiYWNrZ3JvdW5kLWNvbG9yOiMwMDB9Lm1haW57cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLXRvcDo1cmVtO3dpZHRoOjQ1cmVtO2hlaWdodDo0NXJlbTtib3JkZXItcmFkaXVzOjI1cHg7YmFja2dyb3VuZC1jb2xvcjojOTdiMGU1Oy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwcHggMnB4IDM1cHggMTFweCByZ2JhKDAsMCwwLC43NSk7LW1vei1ib3gtc2hhZG93Omluc2V0IDBweCAycHggMzVweCAxMXB4IHJnYmEoMCwwLDAsLjc1KTtib3gtc2hhZG93Omluc2V0IDBweCAycHggMzVweCAxMXB4IHJnYmEoMCwwLDAsLjc1KX0ubWFpbiBkaXZ7Y29sb3I6I2ZmZjstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMHB4IDJweCAzNXB4IDExcHggcmdiYSgwLDAsMCwuNzUpOy1tb3otYm94LXNoYWRvdzppbnNldCAwcHggMnB4IDM1cHggMTFweCByZ2JhKDAsMCwwLC43NSk7Ym94LXNoYWRvdzppbnNldCAwcHggMnB4IDM1cHggMTFweCByZ2JhKDAsMCwwLC43NSl9Lm1haW4gc3Bhbntjb2xvcjojZmZmfS5tYWluIC5kYXRlc3twb3NpdGlvbjpyZWxhdGl2ZTtib3JkZXItcmFkaXVzOjIwcHg7cGFkZGluZzoycmVtO3RvcDotMTByZW07d2lkdGg6YXV0bztoZWlnaHQ6NHJlbTtkaXNwbGF5Om5vbmU7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDc0LDIwNywyNDAsLjc1KTtmb250LWZhbWlseTpcXFwiUHJlc3MgU3RhcnQgMlBcXFwiLGN1cnNpdmV9Lm1haW4gLmNpdHlfY291bnRyeXtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTlyZW07d2lkdGg6YXV0bztwYWRkaW5nOjJyZW07aGVpZ2h0OjJyZW07ZGlzcGxheTpub25lO2ZvbnQtZmFtaWx5OlxcXCJQcmVzcyBTdGFydCAyUFxcXCIsY3Vyc2l2ZTtib3JkZXItcmFkaXVzOjI1cHh9Lm1haW4gLnN3aXRjaHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDo2MHB4O2hlaWdodDozNHB4O21hcmdpbjo1cHh9Lm1haW4gLnNsaWRlcntwb3NpdGlvbjphYnNvbHV0ZTtjdXJzb3I6cG9pbnRlcjt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDtiYWNrZ3JvdW5kLWNvbG9yOiNjY2M7LXdlYmtpdC10cmFuc2l0aW9uOi40czt0cmFuc2l0aW9uOi40c30ubWFpbiAuc2xpZGVyOmJlZm9yZXtwb3NpdGlvbjphYnNvbHV0ZTtjb250ZW50OlxcXCJcXFwiO2hlaWdodDoyNnB4O3dpZHRoOjI2cHg7bGVmdDo0cHg7Ym90dG9tOjRweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7LXdlYmtpdC10cmFuc2l0aW9uOi40czt0cmFuc2l0aW9uOi40c30ubWFpbiBpbnB1dDpjaGVja2VkKy5zbGlkZXJ7YmFja2dyb3VuZC1jb2xvcjojMjE5NmYzfS5tYWluIGlucHV0OmZvY3VzKy5zbGlkZXJ7Ym94LXNoYWRvdzowIDAgMXB4ICMyMTk2ZjN9Lm1haW4gaW5wdXQ6Y2hlY2tlZCsuc2xpZGVyOmJlZm9yZXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDI2cHgpOy1tcy10cmFuc2Zvcm06dHJhbnNsYXRlWCgyNnB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgyNnB4KX0ubWFpbiAuc2xpZGVyLnJvdW5ke2JvcmRlci1yYWRpdXM6MzRweH0ubWFpbiAuc2xpZGVyLnJvdW5kOmJlZm9yZXtib3JkZXItcmFkaXVzOjUwJX0ubWFpbiAudGVtcHN7cG9zaXRpb246cmVsYXRpdmU7Ym90dG9tOi03cmVtO3dpZHRoOjM1cmVtO2hlaWdodDoxMHJlbTtib3JkZXItcmFkaXVzOjI1cHg7YmFja2dyb3VuZC1jb2xvcjpncmVlbn0ubWFpbiAub3RoZXJze3Bvc2l0aW9uOnJlbGF0aXZlO2xlZnQ6MDtib3R0b206LTlyZW07d2lkdGg6MzVyZW07aGVpZ2h0OjVyZW07Ym9yZGVyLXJhZGl1czoyNXB4O2JhY2tncm91bmQtY29sb3I6I2NmYmQxNn0ubWFpbiAuaW5wdXRfY2l0eXtwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LThyZW19Lm1haW4gI25vX2NpdHl7ZGlzcGxheTpub25lfVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9